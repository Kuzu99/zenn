---
title: "å¤šè§’å½¢ãƒãƒªã‚´ãƒ³ã®é¢ç©ã‚’è¨ˆç®—ã™ã‚‹æ–¹æ³•"
emoji: "ğŸŒ"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [Java, JavaScript, Google Maps JavaScript API, é¢ç©]
published: true
---

# ç›®çš„
## å¤šè§’å½¢ãƒãƒªã‚´ãƒ³ã®é¢ç©è¨ˆç®—ã‚’Google Maps JavaScript APIã‚’ä½¿ã‚ãªã„ã§å®Ÿè£…ã—ãŸã„

Google Mapã‚’Webã‚¢ãƒ—ãƒªã«çµ„ã¿è¾¼ã¿ãŸã„ã¨ãã€é€šå¸¸ã¯ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã§[Google Maps JavaScript API](https://developers.google.com/maps/documentation/javascript)ã‚’ä½¿ã†ã¨æ€ã„ã¾ã™ã€‚åœ°å›³ä¸Šã®ä»»æ„ã®å¤šè§’å½¢ãƒãƒªã‚´ãƒ³ã®é¢ç©ã‚’æ±‚ã‚‹å ´åˆã¯ã“ã®[API](https://developers.google.com/maps/documentation/javascript/reference/geometry?hl=ja#spherical.computeArea)ï¼ˆ`computeArea(path)`ï¼‰ã‚’åˆ©ç”¨ã—ã¦é¢ç©ã‚’æ±‚ã‚ã¾ã™ã€‚

ä»Šå›ã®ç›®çš„ã¯ã€ã€Œä»»æ„ã®å¤šè§’å½¢ãƒãƒªã‚´ãƒ³ã®é¢ç©è¨ˆç®—ã‚’ã“ã®APIã‚’ä½¿ã‚ãªã„ã§å®Ÿè£…ã™ã‚‹ã€ã“ã¨ã«ãªã‚Šã¾ã™ã€‚

ä»Šå›ä½¿ç”¨ã™ã‚‹è¨€èªã¯Javaã«ã—ã¾ã—ãŸã€‚

# èª¿æŸ»
## Google Map JavaScript APIã®ä»•æ§˜ã®èª¿æŸ»

å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®[çƒé¢ã‚¸ã‚ªãƒ¡ãƒˆãƒªã®ã‚³ãƒ³ã‚»ãƒ—ãƒˆ](https://developers.google.com/maps/documentation/javascript/geometry?hl=ja_JP)ã«ã‚ˆã‚‹ã¨ã€åœ°çƒã‚’ã€Œçƒé¢ã€ã¨ã—ã¦æ‰±ã£ã¦ã„ã¾ã™ã€‚

> çƒé¢ä¸Šï¼ˆã¾ãŸã¯ãã®æŠ•å½±ä¸Šï¼‰ã«ãŠã„ã¦ã¯ã€çƒé¢å¹¾ä½•å­¦ã®é–¢æ•°ã‚’ä½¿ç”¨ã—ã¦ã€è·é›¢ã‚„æ–¹å‘ã€é¢ç©ãªã©ã®æ§‹æˆè¦ç´ ã‚’è¨ˆç®—ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚Maps API ã® google.maps.geometry.spherical åå‰ç©ºé–“ã«ã¯ã€ã“ã‚Œã‚‰ã®çƒé¢å¹¾ä½•å­¦ã®æ§‹æˆè¦ç´ ã‚’è¨ˆç®—ã™ã‚‹ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã€ãŠã‚ˆã³çƒé¢åº§æ¨™ï¼ˆç·¯åº¦ã¨çµŒåº¦ï¼‰ã‹ã‚‰ã‚¹ã‚«ãƒ©ãƒ¼å€¤ã‚’è¨ˆç®—ã™ã‚‹é™çš„ãƒ¡ã‚½ãƒƒãƒ‰ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚

### è£œè¶³: åœ°çƒã‚’çƒé¢ã¨ã™ã‚‹ã‹å›è»¢æ¥•å††ä½“ã¨ã™ã‚‹ã‹ã§é¢ç©ãŒå¤‰ã‚ã‚‹
åœ°çƒã®å½¢ã¯æœ€ã‚‚è¿‘ã„**å›è»¢æ¥•å††ä½“**ã§å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚[ä¸–ç•Œæ¸¬åœ°ç³»ç§»è¡Œã®æ¦‚è¦ 1.æ¦‚è¦ - å›½åœŸåœ°ç†é™¢](https://www.gsi.go.jp/LAW/G2000-g2000-h1.htm)
å›½åœŸåœ°ç†é™¢ãŒæä¾›ã—ã¦ã„ã‚‹Webã‚¢ãƒ—ãƒªã€Œ[åœ°ç†é™¢åœ°å›³](https://maps.gsi.go.jp/#7/36.022447/137.686157/&base=std&ls=std&disp=1&vs=c1g1j0h0k0l0u0t0z0r0s0m0f1)ã€ã§ã¯å›è»¢æ¥•å††ä½“ã¨ã—ã¦é¢ç©ã‚’è¨ˆç®—ã—ã¦ã„ã¾ã™ã€‚[åœ°ç†é™¢åœ°å›³ã§å¾—ã‚‰ã‚Œã‚‹å€¤ç­‰ã«ã¤ã„ã¦](https://maps.gsi.go.jp/help/howtouse.html)

ã—ã‹ã—GEOç³»ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã„ãã¤ã‹ã§ã¯åœ°çƒã‚’**çƒä½“**ã¨ã—ã¦æ‰±ã£ã¦ã„ã‚‹ã‚±ãƒ¼ã‚¹ãŒã‚ã‚Šã¾ã™ã€‚ã“ã®æ™‚ã®è¨ˆç®—æ‰‹æ³•ãŒç•°ãªã‚‹ã®ã§æ¬²ã—ã„çµæœãŒã©ã®ã‚ˆã†ãªå€¤ãªã®ã‹æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚

## åœ°çƒã‚’çƒä½“ã¨ã—ã¦æ‰±ã†éš›ã®é¢ç©è¨ˆç®—æ–¹æ³•

åœ°çƒã®é¢ç©ã‚’æ±‚ã‚ã‚‹æ–¹æ³•ã¯è«–æ–‡[Some algorithms for polygons on a sphere](https://trs.jpl.nasa.gov/handle/2014/40409)ã‚’åˆ©ç”¨ã—ãŸå®Ÿè£…ã‚’ã—ã¦ã„ã‚‹ã‚±ãƒ¼ã‚¹ãŒã‚ã‚Šã¾ã—ãŸã€‚

ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚³ãƒ¼ãƒ‰
- [Openlayers](https://github.com/openlayers/openlayers/blob/f3d92f013bec9076bac09eff6a6a32722f8e809d/src/ol/sphere.js#L143)
- Leaflet(ãƒ—ãƒ©ã‚°ã‚¤ãƒ³)[Leaflet.MeasureAreaControl](https://github.com/zvaraondrej/Leaflet.MeasureAreaControl/blob/master/lib/GeometryUtil.js#L3)
- [Turf.js](https://github.com/Turfjs/turf/blob/master/packages/turf-area/index.ts#L85)

# å®Ÿè£…
## Javaã§è«–æ–‡ã®ã‚ˆã†ã«æ›¸ãä¸‹ã—ã¦ã¿ã‚‹

- Google Maps JavaScript APIã§ã¯åœ°çƒã®åŠå¾„ã‚’[`6,378,137 m`](https://developers.google.com/maps/documentation/javascript/reference/geometry?hl=ja#spherical)ã¨ã—ã¦ã„ã¾ã™ã€‚

```java
import java.math.BigDecimal;
import java.util.ArrayList;

public class AreaOfaPolygonOnaSphere { 
    public static final Double RADIUS = Double.valueOf(6378137);
    
    public static BigDecimal getAreaInternal() { 
        Double acreage = Double.valueOf(0); 
        
        ArrayList<Double[]> coordinates = new ArrayList<>(); 
        Double[][] point1 = {{35.656479794530156, 139.7582095207256}}; 
        Double[][] point2 = {{35.65613109521005, 139.7597973884624}}; 
        Double[][] point3 = {{35.657403840365355, 139.75994759216724}}; 
        Double[][] point4 = {{35.65765664349531, 139.7585206569713}}; 
        
        coordinates.add(point1[0]); 
        coordinates.add(point2[0]); 
        coordinates.add(point3[0]); 
        coordinates.add(point4[0]); 
        
        Integer len = coordinates.size(); 
        
        Double y1 = coordinates.get(len - 1)[0]; 
        Double x1 = coordinates.get(len - 1)[1]; 
        
        for (int i = 0; i < len; i++) { 
            Double y2 = coordinates.get(i)[0]; 
            Double x2 = coordinates.get(i)[1]; 
            
            acreage += Math.toRadians(x2 - x1) * (2 + Math.sin(Math.toRadians(y1)) + Math.sin(Math.toRadians(y2))); 
            x1 = x2; y1 = y2; 
        } 
        // åº§æ¨™ãŒãƒªã‚¹ãƒˆãŒå³å›ã‚Šã‹å·¦å›ã‚Šã‹ã§æ­£è² ãŒåè»¢ã™ã‚‹ãŸã‚çµ¶å¯¾å€¤ã‚’å–ã‚‹
        return BigDecimal.valueOf(Math.abs((acreage * RADIUS * RADIUS) / 2.0)); 
    } 
        
    public static void main(String[] args) { 
        System.out.println(getAreaInternal()); 
    }
}
```

# èª¿æŸ»çµæœ
- Google Maps JavaScript APIã‚’ç”¨ã„ãŸçµæœã¨åŒã˜å€¤ãŒå¾—ã‚‰ã‚Œã‚‹ã“ã¨ãŒã‚ã‹ã£ãŸã€‚
- ã“ã®ã‚ˆã†ãªå®Ÿè£…ã‚’ã™ã‚‹ã“ã¨ã§Google Maps JavaScriptã‚„ãã®ä»–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ç”¨ã„ãªãã¦ã‚‚å®Ÿè£…ã§ãã‚‹ã“ã¨ãŒã‚ã‹ã£ãŸã€‚

# å‚è€ƒ
- [yonda, 2021, åœ°ç†åº§æ¨™ç³»ã§ã®è·é›¢ã‚„é¢ç©ã‚’è¨ˆç®—ã™ã‚‹ã¨ãã«è¦‹ã‚‹è³‡æ–™ - zenn](https://zenn.dev/yonda/articles/c0003d90e52b3e)

